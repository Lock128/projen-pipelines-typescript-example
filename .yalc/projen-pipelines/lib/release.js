#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
const stdVer = require("standard-version");
function createManifest(outDir, namespace) {
    const projectInfo = JSON.parse(fs_1.readFileSync(path_1.join('package.json')).toString('utf-8'));
    const assemblyManifest = JSON.stringify({
        name: `${namespace}/${projectInfo.name}`,
        author: projectInfo.author,
        license: projectInfo.license,
        version: '0.0.0',
    }, null, 2);
    fs_1.writeFileSync(path_1.join(outDir, 'package.json'), assemblyManifest, { encoding: 'utf-8' });
    const rcFile = path_1.join(outDir, '.npmrc');
    if (fs_1.existsSync(rcFile)) {
        fs_1.rmSync(rcFile, { force: true });
    }
    fs_1.copyFileSync('.npmrc', rcFile);
}
function bumpVersion() {
    void stdVer({
        packageFiles: [],
        bumpFiles: [],
        skip: {
            commit: true,
            changelog: true,
        },
        firstRelease: false,
        gitTagFallback: true,
        tagPrefix: '',
    }).then(console.log).catch(console.error);
}
switch (process.argv[2]) {
    case 'create-manifest':
        createManifest(process.argv[3], process.argv[4]);
        break;
    case 'bump':
        bumpVersion();
        break;
    default:
        console.log('Cannot find command: ' + process.argv[2]);
        break;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVsZWFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9yZWxlYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLDJCQUFtRjtBQUNuRiwrQkFBNEI7QUFDNUIsMkNBQTJDO0FBRTNDLFNBQVMsY0FBYyxDQUFDLE1BQWMsRUFBRSxTQUFpQjtJQUN2RCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFZLENBQUMsV0FBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDckYsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3RDLElBQUksRUFBRSxHQUFHLFNBQVMsSUFBSSxXQUFXLENBQUMsSUFBSSxFQUFFO1FBQ3hDLE1BQU0sRUFBRSxXQUFXLENBQUMsTUFBTTtRQUMxQixPQUFPLEVBQUUsV0FBVyxDQUFDLE9BQU87UUFDNUIsT0FBTyxFQUFFLE9BQU87S0FDakIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDWixrQkFBYSxDQUFDLFdBQUksQ0FBQyxNQUFNLEVBQUUsY0FBYyxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUVyRixNQUFNLE1BQU0sR0FBRyxXQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3RDLElBQUksZUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3RCLFdBQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUNqQztJQUNELGlCQUFZLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFFRCxTQUFTLFdBQVc7SUFDbEIsS0FBSyxNQUFNLENBQUM7UUFDVixZQUFZLEVBQUUsRUFBRTtRQUNoQixTQUFTLEVBQUUsRUFBRTtRQUNiLElBQUksRUFBRTtZQUNKLE1BQU0sRUFBRSxJQUFJO1lBQ1osU0FBUyxFQUFFLElBQUk7U0FDaEI7UUFDRCxZQUFZLEVBQUUsS0FBSztRQUNuQixjQUFjLEVBQUUsSUFBSTtRQUNwQixTQUFTLEVBQUUsRUFBRTtLQUNkLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUMsQ0FBQztBQUVELFFBQVEsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUN2QixLQUFLLGlCQUFpQjtRQUNwQixjQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsTUFBTTtJQUNSLEtBQUssTUFBTTtRQUNULFdBQVcsRUFBRSxDQUFDO1FBQ2QsTUFBTTtJQUNSO1FBQ0UsT0FBTyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkQsTUFBTTtDQUNUIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuXG5pbXBvcnQgeyBjb3B5RmlsZVN5bmMsIGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYywgcm1TeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgc3RkVmVyIGZyb20gJ3N0YW5kYXJkLXZlcnNpb24nO1xuXG5mdW5jdGlvbiBjcmVhdGVNYW5pZmVzdChvdXREaXI6IHN0cmluZywgbmFtZXNwYWNlOiBzdHJpbmcpIHtcbiAgY29uc3QgcHJvamVjdEluZm8gPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhqb2luKCdwYWNrYWdlLmpzb24nKSkudG9TdHJpbmcoJ3V0Zi04JykpO1xuICBjb25zdCBhc3NlbWJseU1hbmlmZXN0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIG5hbWU6IGAke25hbWVzcGFjZX0vJHtwcm9qZWN0SW5mby5uYW1lfWAsXG4gICAgYXV0aG9yOiBwcm9qZWN0SW5mby5hdXRob3IsXG4gICAgbGljZW5zZTogcHJvamVjdEluZm8ubGljZW5zZSxcbiAgICB2ZXJzaW9uOiAnMC4wLjAnLFxuICB9LCBudWxsLCAyKTtcbiAgd3JpdGVGaWxlU3luYyhqb2luKG91dERpciwgJ3BhY2thZ2UuanNvbicpLCBhc3NlbWJseU1hbmlmZXN0LCB7IGVuY29kaW5nOiAndXRmLTgnIH0pO1xuXG4gIGNvbnN0IHJjRmlsZSA9IGpvaW4ob3V0RGlyLCAnLm5wbXJjJyk7XG4gIGlmIChleGlzdHNTeW5jKHJjRmlsZSkpIHtcbiAgICBybVN5bmMocmNGaWxlLCB7IGZvcmNlOiB0cnVlIH0pO1xuICB9XG4gIGNvcHlGaWxlU3luYygnLm5wbXJjJywgcmNGaWxlKTtcbn1cblxuZnVuY3Rpb24gYnVtcFZlcnNpb24oKSB7XG4gIHZvaWQgc3RkVmVyKHtcbiAgICBwYWNrYWdlRmlsZXM6IFtdLFxuICAgIGJ1bXBGaWxlczogW10sXG4gICAgc2tpcDoge1xuICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgY2hhbmdlbG9nOiB0cnVlLFxuICAgIH0sXG4gICAgZmlyc3RSZWxlYXNlOiBmYWxzZSxcbiAgICBnaXRUYWdGYWxsYmFjazogdHJ1ZSxcbiAgICB0YWdQcmVmaXg6ICcnLFxuICB9KS50aGVuKGNvbnNvbGUubG9nKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbn1cblxuc3dpdGNoIChwcm9jZXNzLmFyZ3ZbMl0pIHtcbiAgY2FzZSAnY3JlYXRlLW1hbmlmZXN0JzpcbiAgICBjcmVhdGVNYW5pZmVzdChwcm9jZXNzLmFyZ3ZbM10sIHByb2Nlc3MuYXJndls0XSk7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ2J1bXAnOlxuICAgIGJ1bXBWZXJzaW9uKCk7XG4gICAgYnJlYWs7XG4gIGRlZmF1bHQ6XG4gICAgY29uc29sZS5sb2coJ0Nhbm5vdCBmaW5kIGNvbW1hbmQ6ICcgKyBwcm9jZXNzLmFyZ3ZbMl0pO1xuICAgIGJyZWFrO1xufVxuIl19